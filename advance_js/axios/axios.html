<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Async/Await Fetch Example</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">

<h2 class="mb-3">Posts Table</h2>

<!-- Buttons to fetch single/all posts -->
<button class="btn btn-primary me-2" onclick="getSinglePost()">Fetch Post 5</button>
<button class="btn btn-success" onclick="getAllPosts()">Fetch All Posts</button>

<!-- Table -->
<table class="table table-striped table-bordered table-hover mt-3" id="postsTable">
  <thead class="table-dark">
    <tr>
      <th>userId</th>
      <th>id</th>
      <th>title</th>
      <th>body</th>
    </tr>
  </thead>
  <tbody>
    <!-- Data rows will be inserted here -->
  </tbody>
</table>

<script>
  const tableBody = document.querySelector("#postsTable tbody");

  // Clear table before inserting new data
  function clearTable() {
    tableBody.innerHTML = '';
  }

  // Function to show data (works for single object or array)
  function showData(data) {
    clearTable();
    
    if (Array.isArray(data)) {
      data.forEach(post => {
        let row = `<tr>
          <td>${post.userId}</td>
          <td>${post.id}</td>
          <td>${post.title}</td>
          <td>${post.body}</td>
        </tr>`;
        tableBody.insertAdjacentHTML('beforeend', row);
      });
    } else {
      let row = `<tr>
        <td>${data.userId}</td>
        <td>${data.id}</td>
        <td>${data.title}</td>
        <td>${data.body}</td>
      </tr>`;
      tableBody.insertAdjacentHTML('beforeend', row);
    }
  }

 // Fetch single post based on user input
async function getSinglePost() {
  try {
    // Ask user for post ID
    let postId = prompt("Enter Post ID (1-100):");
    if (!postId) return; // if user cancels prompt, do nothing

    postId = Number(postId); // convert to number
    if (isNaN(postId) || postId < 1 || postId > 100) {
      alert("Please enter a valid Post ID between 1 and 100.");
      return;
    }

    const response = await fetch(`https://jsonplaceholder.typicode.com/posts/${postId}`);
    if (!response.ok) throw new Error('HTTP error! Status: ' + response.status);
    const data = await response.json();
    showData(data);

  } catch (error) {
    console.error('Fetch error:', error);
    alert('Error fetching post!');
  }
}


  // Fetch all posts
  async function getAllPosts() {
    try {
      const response = await fetch('https://jsonplaceholder.typicode.com/posts');
      if (!response.ok) throw new Error('HTTP error! Status: ' + response.status);
      const data = await response.json();
      showData(data);
    } catch (error) {
      console.error('Fetch error:', error);
      alert('Error fetching posts!');
    }
  }
</script>

</body>
</html>
